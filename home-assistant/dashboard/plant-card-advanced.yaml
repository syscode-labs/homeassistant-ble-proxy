# Advanced Plant Sensor Dashboard
#
# Requires HACS custom cards:
# - mushroom-cards (https://github.com/piitaya/lovelace-mushroom)
# - mini-graph-card (https://github.com/kalkih/mini-graph-card)
# - card-mod (optional, for custom styling)
#
# Install via HACS â†’ Frontend â†’ search for card name

# =============================================================================
# SINGLE PLANT CARD (Mushroom + Mini Graph)
# =============================================================================

type: vertical-stack
cards:
  # Header with current values
  - type: custom:mushroom-template-card
    primary: "Living Room Plant"
    secondary: >-
      ğŸ’§ {{ states('sensor.sgs01_living_room_moisture') }}% Â·
      ğŸŒ¡ï¸ {{ states('sensor.sgs01_living_room_temperature') }}Â°C Â·
      ğŸ”‹ {{ states('sensor.sgs01_living_room_battery') }}%
    icon: mdi:flower
    icon_color: >-
      {% set moisture = states('sensor.sgs01_living_room_moisture') | int(0) %}
      {% if moisture > 60 %}blue
      {% elif moisture > 40 %}green
      {% elif moisture > 20 %}yellow
      {% else %}red{% endif %}
    tap_action:
      action: more-info
    entity: sensor.sgs01_living_room_moisture

  # Moisture graph
  - type: custom:mini-graph-card
    entities:
      - entity: sensor.sgs01_living_room_moisture
        name: Moisture
        color: "#2196F3"
    hours_to_show: 72
    points_per_hour: 4
    line_width: 2
    font_size: 75
    animate: true
    show:
      name: false
      icon: false
      state: false
      legend: false
      fill: fade
    color_thresholds:
      - value: 20
        color: "#f44336"
      - value: 40
        color: "#ff9800"
      - value: 60
        color: "#4caf50"

# =============================================================================
# MULTI-PLANT OVERVIEW CARD
# =============================================================================

# type: vertical-stack
# cards:
#   - type: markdown
#     content: "## ğŸŒ± Plant Status"
#
#   - type: horizontal-stack
#     cards:
#       # Living Room
#       - type: custom:mushroom-template-card
#         primary: Living Room
#         secondary: "ğŸ’§ {{ states('sensor.sgs01_living_room_moisture') }}%"
#         icon: mdi:flower
#         icon_color: >-
#           {% set m = states('sensor.sgs01_living_room_moisture') | int(0) %}
#           {{ 'red' if m < 20 else 'yellow' if m < 40 else 'green' }}
#         layout: vertical
#         tap_action:
#           action: more-info
#         entity: sensor.sgs01_living_room_moisture
#
#       # Bedroom
#       - type: custom:mushroom-template-card
#         primary: Bedroom
#         secondary: "ğŸ’§ {{ states('sensor.sgs01_bedroom_moisture') }}%"
#         icon: mdi:flower
#         icon_color: >-
#           {% set m = states('sensor.sgs01_bedroom_moisture') | int(0) %}
#           {{ 'red' if m < 20 else 'yellow' if m < 40 else 'green' }}
#         layout: vertical
#         tap_action:
#           action: more-info
#         entity: sensor.sgs01_bedroom_moisture
#
#       # Kitchen
#       - type: custom:mushroom-template-card
#         primary: Kitchen
#         secondary: "ğŸ’§ {{ states('sensor.sgs01_kitchen_moisture') }}%"
#         icon: mdi:flower
#         icon_color: >-
#           {% set m = states('sensor.sgs01_kitchen_moisture') | int(0) %}
#           {{ 'red' if m < 20 else 'yellow' if m < 40 else 'green' }}
#         layout: vertical
#         tap_action:
#           action: more-info
#         entity: sensor.sgs01_kitchen_moisture

# =============================================================================
# COMBINED GRAPH (All sensors on one chart)
# =============================================================================

# type: custom:mini-graph-card
# name: All Plants - Moisture History
# entities:
#   - entity: sensor.sgs01_living_room_moisture
#     name: Living Room
#     color: "#4caf50"
#   - entity: sensor.sgs01_bedroom_moisture
#     name: Bedroom
#     color: "#2196f3"
#   - entity: sensor.sgs01_kitchen_moisture
#     name: Kitchen
#     color: "#ff9800"
# hours_to_show: 168  # 1 week
# points_per_hour: 2
# line_width: 2
# show:
#   labels: true
#   points: false
#   legend: true
#   state: true
#   name: true
